# üìã –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—é Pull Requests

## üéØ –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

–£ –≤–∞—Å –µ—Å—Ç—å:
- **–¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞**: `feat/macos-ui-refactor` —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ CI/CD
- **17 –æ—Ç–∫—Ä—ã—Ç—ã—Ö PR** –æ—Ç Dependabot –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–¶–µ–ª—å**: –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —É—Å–ø–µ—à–Ω—ã–µ PR –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É `main`

## üöÄ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ GitHub UI (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –®–∞–≥ 1: Push —Ç–µ–∫—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
```bash
# –í—ã —É–∂–µ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –∑–∞–ø—É—à–∏—Ç—å
git push origin feat/macos-ui-refactor
```

#### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å PR –¥–ª—è feat/macos-ui-refactor
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://github.com/drsapaev/final
2. –û—Ç–∫—Ä–æ–π—Ç–µ "Pull requests" ‚Üí "New pull request"
3. –í—ã–±–µ—Ä–∏—Ç–µ: `base: main` ‚Üê `compare: feat/macos-ui-refactor`
4. –î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ CI/CD –ø—Ä–æ–π–¥–µ—Ç –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚úÖ
5. –ù–∞–∂–º–∏—Ç–µ "Merge pull request" ‚Üí "Create merge commit"

#### –®–∞–≥ 3: –û–±—ä–µ–¥–∏–Ω–∏—Ç—å Dependabot PR –≤ main
–î–ª—è **–∫–∞–∂–¥–æ–≥–æ PR –æ—Ç Dependabot**:

1. –û—Ç–∫—Ä–æ–π—Ç–µ PR (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ci(deps): bump actions/upload-artifact from 4 to 5`)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å CI/CD:
   - ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–µ–ª–µ–Ω—ã–µ ‚Üí –º–æ–∂–Ω–æ –º–µ—Ä–∂–∏—Ç—å
   - ‚ùå –ï—Å—Ç—å –æ—à–∏–±–∫–∏ ‚Üí –Ω–µ –º–µ—Ä–∂–∏—Ç—å, –¥–æ–∂–¥–∏—Ç–µ—Å—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
3. –ù–∞–∂–º–∏—Ç–µ **"Merge pull request"**
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –º–µ—Ä–∂–∞:
   - **Squash and merge** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Dependabot) - —Å–æ–∑–¥–∞—Å—Ç –æ–¥–∏–Ω —á–∏—Å—Ç—ã–π –∫–æ–º–º–∏—Ç
   - **Merge commit** - —Å–æ–∑–¥–∞—Å—Ç merge commit
   - **Rebase and merge** - –ª–∏–Ω–µ–π–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è (–Ω–µ –¥–ª—è Dependabot)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª (–¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö)

```bash
# 1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ main
git checkout main
git pull origin main

# 2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ Dependabot PR:
git fetch origin dependabot/...
git merge origin/dependabot/... --squash
git commit -m "Merge: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"
git push origin main

# 3. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤–∞—à—É –≤–µ—Ç–∫—É:
git merge origin/feat/macos-ui-refactor
# –∏–ª–∏
git pull origin feat/macos-ui-refactor
```

## üìä –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è Dependabot PR

### üî• –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–Ω–∞—á–∞–ª–∞ —ç—Ç–∏):
1. **actions/upload-artifact from 4 to 5** (#29)
2. **actions/setup-node from 4 to 6** (#27)
3. **uvicorn from <0.31 to <0.39** (#26)
4. **python from 3.11.10 to 3.11.14** (#25)

### ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
5. **alembic from <1.14 to <1.18** (#24)
6. **pydantic from <2.9 to <2.13** (#19)
7. **httpx from <0.28 to <0.29** (#7)

### üì¶ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–º–æ–∂–Ω–æ –ø–æ–∑–∂–µ):
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö PR

–°–æ–∑–¥–∞–π—Ç–µ `check_prs.sh`:

```bash
#!/bin/bash
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö PR

echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å PR..."
gh pr list --json number,title,state,isDraft,statusCheckRollup | \
  jq -r '.[] | "\(.number) - \(.title) - \(.state) - Checks: \(.statusCheckRollup | length)"'

echo "–î–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —É—Å–ø–µ—à–Ω—ã—Ö PR:"
echo "gh pr merge [NUMBER] --squash"
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ CI/CD** –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º –∫–∞–∂–¥–æ–≥–æ PR
2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ** –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Squash and merge** –¥–ª—è Dependabot PR (—á–∏—Å—Ç–∞—è –∏—Å—Ç–æ—Ä–∏—è)
4. **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ Merge commit** –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∏—á (–ª–µ–≥—á–µ –æ—Ç–∫–∞—Ç–∏—Ç—å)

## üîß –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è GitHub Actions

–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ä–∂ –¥–ª—è Dependabot PR –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—à–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

```yaml
# .github/workflows/auto-merge-dependabot.yml
name: Auto-merge Dependabot
on:
  pull_request:
    types: [opened, synchronize, reopened]
jobs:
  auto-merge:
    runs-on: ubuntu-latest
    if: github.actor == 'dependabot[bot]'
    steps:
      - uses: actions/github-script@v6
        with:
          script: |
            github.rest.pulls.merge({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: context.payload.pull_request.number,
              merge_method: 'squash'
            })
```

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è

- [ ] –í–∞—à–∞ –≤–µ—Ç–∫–∞ `feat/macos-ui-refactor` –∑–∞–ø—É—â–µ–Ω–∞
- [ ] CI/CD –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ
- [ ] PR —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω
- [ ] Dependabot PR –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] Backup —Å–æ–∑–¥–∞–Ω (git tag vX.X.X)
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫

1. ‚úÖ **–°–Ω–∞—á–∞–ª–∞** –æ–±—ä–µ–¥–∏–Ω–∏—Ç–µ –≤–∞—à–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è CI/CD (feat/macos-ui-refactor)
2. ‚è≥ **–ó–∞—Ç–µ–º** –æ–±—ä–µ–¥–∏–Ω—è–π—Ç–µ Dependabot PR –ø–æ –æ–¥–Ω–æ–º—É
3. üß™ **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
4. üì¶ **–ü–∞–∫–µ—Ç–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –º–µ–Ω—å—à–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –≥—Ä—É–ø–ø–∞–º–∏

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

```bash
# –û—Ç–∫–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ merge
git reset --hard HEAD~1

# –ò–ª–∏ –æ—Ç–∫–∞—Ç –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–æ–º–º–∏—Ç—É
git reset --hard <commit-hash>

# –°–æ–∑–¥–∞—Ç—å backup –ø–µ—Ä–µ–¥ merge
git tag backup-$(date +%Y%m%d-%H%M%S)
git push origin backup-$(date +%Y%m%d-%H%M%S)
```

