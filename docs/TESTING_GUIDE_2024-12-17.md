# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π (2024-12-17)

## üöÄ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Backend
```bash
cd c:\final\backend
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å Frontend
```bash
cd c:\final\frontend
npm run dev
```

### 3. –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
- URL: `http://localhost:5173`
- DevTools: F12 ‚Üí Console (–¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫)

---

## ‚úÖ –¢–µ—Å—Ç 1: SSOT Service Code Mappings

### –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–®–∞–≥–∏:**
1. –í–æ–π—Ç–∏ –∫–∞–∫ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä** (registrar/registrar)
2. –û—Ç–∫—Ä—ã—Ç—å **–ü–∞–Ω–µ–ª—å –†–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
3. –í —Ç–∞–±–ª–∏—Ü–µ –∑–∞–ø–∏—Å–µ–π –Ω–∞–π—Ç–∏ –ª—é–±—É—é –∑–∞–ø–∏—Å—å —Å —É—Å–ª—É–≥–∞–º–∏
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤ –∫–æ–ª–æ–Ω–∫–µ "–£—Å–ª—É–≥–∏" –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è **—á–∏—Ç–∞–µ–º—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è** (–Ω–µ –∫–æ–¥—ã):
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞", "–≠–ö–ì", "–û–ê–ö"
   - ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: "K01", "consultation.cardiology", "1"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —É—Å–ª—É–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —á–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏.

---

## ‚úÖ –¢–µ—Å—Ç 2: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —É—Å–ª—É–≥ (AppointmentWizardV2)

### –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏

**–®–∞–≥–∏:**
1. –í —Ç–∞–±–ª–∏—Ü–µ –∑–∞–ø–∏—Å–µ–π –Ω–∞–π—Ç–∏ **QR-–∑–∞–ø–∏—Å—å** (–º–µ—Ç–∫–∞ "QR" –∏–ª–∏ source='online')
2. –ù–∞–∂–∞—Ç—å –Ω–∞ —Å—Ç—Ä–æ–∫—É ‚Üí –æ—Ç–∫—Ä—ã—Ç—å –º–∞—Å—Ç–µ—Ä —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤ –∫–æ—Ä–∑–∏–Ω–µ (—à–∞–≥ 2) –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏—Å—Ö–æ–¥–Ω—ã–µ —É—Å–ª—É–≥–∏:**
   - –£—Å–ª—É–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω—ã
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—É
4. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —É—Å–ª—É–≥—É –≤ –∫–æ—Ä–∑–∏–Ω—É
5. –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–æ—Ä–∑–∏–Ω–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —É—Å–ª—É–≥–∞–º–∏
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- –ù–æ–≤–∞—è —É—Å–ª—É–≥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Console:**
- –ù–µ—Ç –æ—à–∏–±–æ–∫ `Cannot read properties of undefined`
- –ù–µ—Ç –æ—à–∏–±–æ–∫ `'api' is not defined`

---

## ‚úÖ –¢–µ—Å—Ç 3: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤

### –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∞ —Å **–Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É—Å–ª—É–≥–∞–º–∏ –æ–¥–Ω–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏**:
   - –ù–∞–ø—Ä–∏–º–µ—Ä: 2 –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞
2. –û—Ç–∫—Ä—ã—Ç—å "–í—Å–µ –æ—Ç–¥–µ–ª–µ–Ω–∏—è" –≤ –ø–∞–Ω–µ–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. –ù–∞–π—Ç–∏ —ç—Ç–æ–≥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í —Å—Ç—Ä–æ–∫–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –≤–∏–¥–Ω—ã **–í–°–ï** –µ–≥–æ –∑–∞–ø–∏—Å–∏
- –ù–æ–º–µ—Ä–∞ –≤ –æ—á–µ—Ä–µ–¥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–ª—è **–∫–∞–∂–¥–æ–π** —É—Å–ª—É–≥–∏
- –ù–∏—á–µ–≥–æ –Ω–µ "–ø–æ—Ç–µ—Ä—è–ª–æ—Å—å" –ø—Ä–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

---

## ‚úÖ –¢–µ—Å—Ç 4: –†–∞—Å—á—ë—Ç –¥–ª–∏–Ω—ã –æ–Ω–ª–∞–π–Ω-–æ—á–µ—Ä–µ–¥–∏

### –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª—é–¥–µ–π –≤ –æ—á–µ—Ä–µ–¥–∏

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
1. –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ QR-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

**–®–∞–≥–∏:**
1. –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ –∫–ª–∏–Ω–∏–∫–∏ (–∏–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É QR-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
2. –í—ã–±—Ä–∞—Ç—å –≤—Ä–∞—á–∞/—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π –≤ –æ—á–µ—Ä–µ–¥–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ß–∏—Å–ª–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø–∏—Å–µ–π OnlineQueueEntry —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `waiting` –∏–ª–∏ `called`
- –ß–∏—Å–ª–æ –ù–ï –≤–∫–ª—é—á–∞–µ—Ç Visit/Appointment –∏–∑ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

---

## ‚úÖ –¢–µ—Å—Ç 5: Batch API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–æ–≤–æ–≥–æ Batch API

**–ß–µ—Ä–µ–∑ DevTools Console:**
```javascript
// –ò–º–ø–æ—Ä—Ç –Ω–µ –Ω—É–∂–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ–º fetch –Ω–∞–ø—Ä—è–º—É—é
const token = localStorage.getItem('access_token');

// GET: –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –∑–∞ –¥–∞—Ç—É
fetch('/api/v1/registrar/batch/patients/1/entries/2024-12-17', {
  headers: { 'Authorization': `Bearer ${token}` }
}).then(r => r.json()).then(console.log);
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{ patient_id, date, online_queue_entries, visits, aggregated }`
- –ù–µ—Ç –æ—à–∏–±–æ–∫ 500/404

---

## ‚úÖ –¢–µ—Å—Ç 6: –û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏

### –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ—Ç–º–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–®–∞–≥–∏:**
1. –ù–∞–π—Ç–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –æ—Ç–º–µ–Ω—ã (–∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å "–û—Ç–º–µ–Ω–∏—Ç—å" –≤ –º–µ–Ω—é)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—Ç–º–µ–Ω—É

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è
- –í Console –Ω–µ—Ç –æ—à–∏–±–æ–∫
- –ó–∞–ø–∏—Å—å –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ (–∏–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–º–µ–Ω—ë–Ω–Ω–∞—è)

---

## üêõ –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ Console

### –û—à–∏–±–∫–∏ –∫–æ—Ç–æ—Ä—ã—Ö –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚ùå `'api' is not defined`
- ‚ùå `Cannot read properties of undefined`
- ‚ùå `Failed to fetch` (—Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏)
- ‚ùå HTTP 500 –æ—à–∏–±–∫–∏

### –î–æ–ø—É—Å—Ç–∏–º—ã–µ warnings:
- ‚ö†Ô∏è ESLint warnings (–Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É)
- ‚ö†Ô∏è React DevTools –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –£—Å–ª—É–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ (–Ω–µ –∫–æ–¥–∞–º–∏)
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∑–∞–ø–∏—Å–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ—Ä–∑–∏–Ω—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ù–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –æ–¥–Ω–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è
- [ ] –û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ù–µ—Ç JavaScript –æ—à–∏–±–æ–∫ –≤ Console
- [ ] Backend API –æ—Ç–≤–µ—á–∞–µ—Ç (–Ω–µ—Ç 500 –æ—à–∏–±–æ–∫)

---

## üîÑ –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ï—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏:
```bash
git add .
git commit -m "refactor: SSOT service mappings, batch API, bug fixes (Dec 2024)"
git push
```

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2024-12-17*
