# –ü—Ä–∞–≤–∏–ª–∞ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è QR-–ó–∞–ø–∏—Å–µ–π (SSOT)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è QR-–∑–∞–ø–∏—Å–µ–π (–∑–∞–ø–∏—Å–µ–π –æ–Ω–ª–∞–π–Ω-–æ—á–µ—Ä–µ–¥–∏) –≤ —Å–∏—Å—Ç–µ–º–µ, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.

---

## üèóÔ∏è SSOT Architecture (Single Source of Truth)

### –ü—Ä–∏–Ω—Ü–∏–ø: Backend ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

**Frontend –ù–ò–ö–û–ì–î–ê –ù–ï:**
- ‚ùå **–£–≥–∞–¥—ã–≤–∞–µ—Ç** ‚Äî –≤—ã–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å backend
- ‚ùå **–ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏** ‚Äî –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç/–¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä—É–µ—Ç domain –æ–±—ä–µ–∫—Ç—ã
- ‚ùå **–ö–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç –∫—Ä–∏–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** ‚Äî –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- ‚ùå **–°–æ–¥–µ—Ä–∂–∏—Ç domain-–ª–æ–≥–∏–∫—É** ‚Äî —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞

**Frontend –ú–û–ñ–ï–¢ —Å–æ–¥–µ—Ä–∂–∞—Ç—å:**
- ‚úÖ **Presentation logic** ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –≤–∏–∑—É–∞–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
- ‚úÖ **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã** ‚Äî —è–≤–Ω–æ –ø–æ–º–µ—á–µ–Ω—ã `// ‚ö†Ô∏è TEMPORARY ADAPTER`

---

## 1. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è QR-–∑–∞–ø–∏—Å–∏

–ó–∞–ø–∏—Å—å —Å—á–∏—Ç–∞–µ—Ç—Å—è QR-–∑–∞–ø–∏—Å—å—é (OnlineQueueEntry), –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —É—Å–ª–æ–≤–∏—è:
*   `record_type === 'online_queue'`
*   `source === 'online'`

## 2. –ü—Ä–∏–Ω—Ü–∏–ø –ï–¥–∏–Ω–æ–≥–æ –ò—Å—Ç–æ—á–Ω–∏–∫–∞ –ò—Å—Ç–∏–Ω—ã (SSOT) –ø—Ä–∏ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

–ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ QR-–∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ `AppointmentWizardV2` (–∏–ª–∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã) **–ó–ê–ü–†–ï–©–ï–ù–û** —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–ø–∏—Å—å.

### –ü—Ä–∞–≤–∏–ª–æ 2.1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ endpoint –ø–æ–ª–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
–î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ QR-–∑–∞–ø–∏—Å–∏ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ API:
`PUT /api/v1/qr-queue/online-entry/{entry_id}/full-update`

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –æ–±–Ω–æ–≤–ª—è–µ—Ç:
*   –î–∞–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞ (–§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω, –≥–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è, –∞–¥—Ä–µ—Å)
*   –¢–∏–ø –≤–∏–∑–∏—Ç–∞ –∏ —Å–∫–∏–¥–∫–∏
*   –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ (—É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ, –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ)

### –ü—Ä–∞–≤–∏–ª–æ 2.2: –ó–∞–ø—Ä–µ—Ç –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `create_cart_appointments`
–ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π QR-–∑–∞–ø–∏—Å–∏ **–ó–ê–ü–†–ï–©–ï–ù–û** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å endpoint `POST /registrar/cart` (`create_cart_appointments`), —Ç–∞–∫ –∫–∞–∫ –æ–Ω –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç *–Ω–æ–≤—ã–µ* –∑–∞–ø–∏—Å–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ –∏ –≤–∏–∑–∏—Ç—ã, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –¥—É–±–ª–∏–∫–∞—Ç–∞–º.

## 3. –õ–æ–≥–∏–∫–∞ Frontend (AppointmentWizardV2)

–õ–æ–≥–∏–∫–∞ `handleComplete` –≤ `AppointmentWizardV2.jsx` –¥–æ–ª–∂–Ω–∞ —Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É:

1.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∑–∞–ø–∏—Å–∏:**
    ```javascript
    const isOnlineQueueEntry = initialData.record_type === 'online_queue' && effectiveSource === 'online';
    ```

2.  **–ü–æ–ª—É—á–µ–Ω–∏–µ ID:**
    ```javascript
    const queueEntryId = initialData.queue_numbers?.[0]?.id || initialData.id;
    ```

3.  **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
    –ï—Å–ª–∏ `isOnlineQueueEntry` –∏ `queueEntryId` —Å—É—â–µ—Å—Ç–≤—É—é—Ç:
    *   –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å payload —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –∏ —É—Å–ª—É–≥–∞–º–∏ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã.
    *   –í—ã–∑–≤–∞—Ç—å `updateOnlineQueueEntry` (wrapper –¥–ª—è `PUT .../full-update`).
    *   **CRITICAL:** –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é (`return`), —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ fallback-–ª–æ–≥–∏–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π.

## 4. –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –≤ –¢–∞–±–ª–∏—Ü–µ (RegistrarPanel)

–ü—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∑–∞–ø–∏—Å–µ–π –≤ `RegistrarPanel` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –µ—Å–ª–∏ –æ–¥–∏–Ω –ø–∞—Ü–∏–µ–Ω—Ç –∑–∞–ø–∏—Å–∞–Ω –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –≤—Ä–∞—á–∞–º —á–µ—Ä–µ–∑ QR (—Ö–æ—Ç—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∏–ª–∏ –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É—Å–ª—É–≥–∞–º–∏).

**–ö–ª—é—á –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏:**
`dedupKey = online_{pid|phone|fio}_{date}`

*   –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: `patient_id`
*   –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: `phone` (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π)
*   –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: `fio` (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π)
*   Fallback: `entry_id` (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç)

## 5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –£—Å–ª—É–≥

## 5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –£—Å–ª—É–≥ (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Fix 12)

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —É—Å–ª—É–≥–∏ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π QR-–∑–∞–ø–∏—Å–∏ –¥–µ–π—Å—Ç–≤—É—é—Ç –¥–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è:

### –°—Ü–µ–Ω–∞—Ä–∏–π 5.1: First Fill (–ü–µ—Ä–≤–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ)
–ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∑–∞–ø–∏—Å–∏ (—Ä–∞–Ω–µ–µ —É –ø–∞—Ü–∏–µ–Ω—Ç–∞ –Ω–µ –±—ã–ª–æ —É—Å–ª—É–≥, —Ç–æ–ª—å–∫–æ "–ø—É—Å—Ç–æ–π" —Ç–æ–∫–µ–Ω):
*   –ù–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ **—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é** `OnlineQueueEntry`.
*   –ò–º –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è QR-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

### –°—Ü–µ–Ω–∞—Ä–∏–π 5.2: Repeat Edit (–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
–ï—Å–ª–∏ —É –ø–∞—Ü–∏–µ–Ω—Ç–∞ —É–∂–µ –±—ã–ª–∏ —É—Å–ª—É–≥–∏ (–≤ —ç—Ç–æ–π –∏–ª–∏ –¥—Ä—É–≥–æ–π –∑–∞–ø–∏—Å–∏):
*   **Existing Services**: –û—Å—Ç–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ä–æ–π –∑–∞–ø–∏—Å–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
*   **New Services**: –°–∏—Å—Ç–µ–º–∞ **–û–ë–Ø–ó–ê–ù–ê** —Å–æ–∑–¥–∞—Ç—å –¥–ª—è –Ω–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—É—é `Independent OnlineQueueEntry`.
*   **–ó–ê–ü–†–ï–©–ï–ù–û**: –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –≤ JSON-—Å–ø–∏—Å–æ–∫ `services` –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø–∏—Å–∏. –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏.
*   Backend (`full_update_online_entry`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –∏ —Å–æ–∑–¥–∞–µ—Ç –¥–ª—è –Ω–∏—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∑–∞–ø–∏—Å–∏.

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
–ü–∞—Ü–∏–µ–Ω—Ç –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π `OnlineQueueEntry` –Ω–∞ –æ–¥–∏–Ω –¥–µ–Ω—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–Ω—É —Å—Ç–∞—Ä—É—é –ö01 –∏ –Ω–æ–≤—É—é L01). Frontend –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –∏—Ö –≤–∏–∑—É–∞–ª—å–Ω–æ.

## 6. SSOT –¥–ª—è Service Code Mappings (–î–µ–∫–∞–±—Ä—å 2024)

–î–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É—Å–ª—É–≥ –∏ –∫–æ–¥–æ–≤ —Å–æ–∑–¥–∞–Ω —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å:

**–§–∞–π–ª:** `frontend/src/utils/serviceCodeResolver.js`

### –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
```javascript
export const SPECIALTY_TO_CODE = { ... };    // specialty ‚Üí service code
export const CODE_TO_NAME = { ... };          // code ‚Üí display name
export const LEGACY_CODE_TO_NAME = { ... };   // legacy codes
export const ID_TO_NAME = { ... };            // numeric ID ‚Üí name
```

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
```javascript
// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —É—Å–ª—É–≥ –∏–∑ initialData (5 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ ‚Üí 1 —Ñ–æ—Ä–º–∞—Ç)
export function normalizeServicesFromInitialData(initialData, servicesData);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ –∏–º–µ–Ω–∏
export function getServiceDisplayName(code);

// –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ specialty ‚Üí service code
export function toServiceCode(value);
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ AppointmentWizardV2:
```javascript
import { normalizeServicesFromInitialData } from '../../utils/serviceCodeResolver';

// –í–º–µ—Å—Ç–æ 130 —Å—Ç—Ä–æ–∫ —Ä–∞–∑–±–æ—Ä–∞ ‚Äî –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è:
const items = normalizeServicesFromInitialData(initialData, servicesData);
```

## 7. Batch API –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–î–µ–∫–∞–±—Ä—å 2024)

–î–ª—è –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ –≤—Å–µ–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –∑–∞ –¥–µ–Ω—å:

**Backend:** `/api/v1/registrar/batch/patients/{patient_id}/entries/{date}`

**Frontend:** `frontend/src/api/registrarBatch.js`

```javascript
import { cancelAllPatientEntries, batchUpdatePatientEntries } from '../api/registrarBatch';

// –û—Ç–º–µ–Ω–∞ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –ø–∞—Ü–∏–µ–Ω—Ç–∞
await cancelAllPatientEntries(patientId, date, reason);

// Batch-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
await batchUpdatePatientEntries(patientId, date, {
  entries: [
    { id: 123, action: 'update', status: 'called' },
    { id: 124, action: 'cancel', reason: 'no show' }
  ]
});
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/BATCH_UPDATE_ARCHITECTURE.md`

---

## 8. –ü—Ä–∞–≤–∏–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–¥–æ–≤ —É—Å–ª—É–≥ (–î–µ–∫–∞–±—Ä—å 2024)

### –ü—Ä–æ–±–ª–µ–º–∞
–†–∞–Ω–µ–µ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞ –∫–æ–¥—ã —É—Å–ª—É–≥: –≤–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ (K11 –¥–ª—è –≠—Ö–æ–ö–ì, L02 –¥–ª—è –ì–µ–º–æ–≥–ª–æ–±–∏–Ω) –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å fallback-–∫–æ–¥—ã (K01, L01).

### –†–µ—à–µ–Ω–∏–µ: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç API-–¥–∞–Ω–Ω—ã—Ö

**–ü–†–ê–í–ò–õ–û:** `appointment.services` –∏–∑ API –≤—Å–µ–≥–¥–∞ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ fallback-–ª–æ–≥–∏–∫–æ–π.

```javascript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ API
if (appointment.services && appointment.services.length > 0) {
  return appointment.services; // ["K11", "L02"]
}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ specialty (–ø—Ä–∏–≤–æ–¥–∏—Ç –∫ K01)
const code = toServiceCode(specialty); // Fallback –Ω–∞ K01
```

### –ú–∞–ø–ø–∏–Ω–≥ –æ—Ç–¥–µ–ª–æ–≤ –∏ –∫–æ–¥–æ–≤ —É—Å–ª—É–≥

| –í–∫–ª–∞–¥–∫–∞ | –ö–æ–¥—ã —É—Å–ª—É–≥ | –ü—Ä–∏–º–µ—Ä—ã |
|---------|-----------|---------|
| **–ö–∞—Ä–¥–∏–æ–ª–æ–≥** | K (–∫—Ä–æ–º–µ K10) | K01 (–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è), K11 (–≠—Ö–æ–ö–ì) |
| **–≠–ö–ì** | K10, ECG* | K10 (–≠–ö–ì), ECG01 |
| **–î–µ—Ä–º–∞—Ç–æ–ª–æ–≥** | D | D01 (–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è) |
| **–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥** | S | S01 (–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è), S10 (—Ä–µ–Ω—Ç–≥–µ–Ω –∑—É–±–æ–≤) |
| **–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è** | L | L01, L02, L11, L20, L23, L65 |
| **–ü—Ä–æ—Ü–µ–¥—É—Ä—ã** | P, C, D_PROC | P01-P05, C01-C12, D_PROC01-D_PROC04 |

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

- `frontend/src/pages/RegistrarPanel.jsx`:
  - `filterServicesByDepartment()` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É—Å–ª—É–≥ –ø–æ –≤–∫–ª–∞–¥–∫–µ
  - `isInDepartment()` ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–∏ –∫ –æ—Ç–¥–µ–ª—É
- `frontend/src/utils/serviceCodeResolver.js`:
  - `getServiceDisplayName()` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ –∫–æ–¥—É
  - `toServiceCode()` ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ specialty ‚Üí code

---

## 9. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ QR-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–î–µ–∫–∞–±—Ä—å 2025)

### 9.1 –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è Queue Time (–í–†–ï–ú–Ø –û–ß–ï–†–ï–î–ò)

–í—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ (`queue_time`) —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø—Ä–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –≤—ã–∑–æ–≤–µ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤.

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: QR-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–º (First Fill)
1.  –ü–∞—Ü–∏–µ–Ω—Ç —Å–∫–∞–Ω–∏—Ä—É–µ—Ç QR-–∫–æ–¥ –∏ —Å–æ–∑–¥–∞–µ—Ç –∑–∞—è–≤–∫—É (–æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ).
2.  –ö–∞–∂–¥–æ–π —É—Å–ª—É–≥–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è `OnlineQueueEntry` (–∏–ª–∏ –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –≤—Å–µ).
3.  **–í—Ä–µ–º—è –ø–µ—Ä–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ `entry.queue_time`.
4.  `visit_id` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `None` (–∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π, –Ω–æ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º).

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–µ—Ä–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
–ö–æ–≥–¥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç QR-–∑–∞—è–≤–∫—É –≤–ø–µ—Ä–≤—ã–µ (–∑–∞–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞):
*   **–ê) –¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞:** `queue_time` –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.
*   **B) –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ù–û–í–´–• —É—Å–ª—É–≥:**
    *   –ï—Å–ª–∏ –∑–∞–ø–∏—Å—å –±—ã–ª–∞ "–ø—É—Å—Ç–æ–π" (—Ç–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω): –Ω–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –ø–æ–ª—É—á–∞—é—Ç **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è** (–≤—Ä–µ–º—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QR).
    *   –ï—Å–ª–∏ –∑–∞–ø–∏—Å—å —É–∂–µ —Å–æ–¥–µ—Ä–∂–∞–ª–∞ —É—Å–ª—É–≥–∏: —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–≥–∏–∫–∞ –°—Ü–µ–Ω–∞—Ä–∏—è 3.

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è / –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥ (Add Services)
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —É—Å–ª—É–≥ –∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏:
1.  **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É—Å–ª—É–≥–∏:** –°–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–≤–æ—ë **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ** `queue_time`.
2.  **–ù–æ–≤—ã–µ (–¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ) —É—Å–ª—É–≥–∏:** –ü–æ–ª—É—á–∞—é—Ç **–¢–µ–∫—É—â–µ–µ** `queue_time` (–≤—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è).
3.  –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–∞—Ü–∏–µ–Ω—Ç –Ω–µ —Ç–µ—Ä—è–µ—Ç –º–µ—Å—Ç–æ –≤ –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è —Å—Ç–∞—Ä—ã—Ö —É—Å–ª—É–≥, –Ω–æ –≤—Å—Ç–∞–µ—Ç –≤ –∫–æ–Ω–µ—Ü –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –Ω–æ–≤—ã—Ö.

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** Backend –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç "–ø–µ—Ä–≤–∏—á–Ω–æ—Å—Ç—å" –ø–æ –Ω–∞–ª–∏—á–∏—é —É—Å–ª—É–≥ –≤ –ë–î (`existing_service_ids`). –ï—Å–ª–∏ —É—Å–ª—É–≥ —É –ø–∞—Ü–∏–µ–Ω—Ç–∞ –Ω–µ—Ç ‚Äî —ç—Ç–æ *First Fill* (Original Time). –ï—Å–ª–∏ –µ—Å—Ç—å ‚Äî —ç—Ç–æ *Edit/Add* (Mixed Times).

### 9.2 –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–∫—Å—ã

#### Fix 1: –°–æ–∑–¥–∞–Ω–∏–µ `patient_id` –ø—Ä–∏ QR-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚úÖ
**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:** `_find_or_create_patient(patient_name, phone)`
–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ `patient_id` **–í–°–ï–ì–î–ê** –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ QR-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

#### Fix 2: –°–æ–∑–¥–∞–Ω–∏–µ `Visit` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ QR-–∑–∞–ø–∏—Å–∏ ‚úÖ
**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:** `_create_visit_for_qr(patient_id, visit_date, services, ...)`
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —É—Å–ª—É–≥ –∫ QR-–∑–∞–ø–∏—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è Visit —Å VisitServices.

#### Fix 3: Backend –≤—ã—á–∏—Å–ª—è–µ—Ç `aggregated_ids` ‚úÖ
Backend **–°–ê–ú** –≤—ã—á–∏—Å–ª—è–µ—Ç `aggregated_ids` –ø–æ `patient_id` + –¥–∞—Ç–µ. Frontend `aggregated_ids` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ fallback.

#### Fix 4: –ó–∞–ø—Ä–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è entries –±–µ–∑ —É—Å–ª—É–≥ ‚úÖ
–ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π `OnlineQueueEntry` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π `services_list_new`.

#### Fix 5: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ `queue_time` –¥–ª—è "–ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è" QR ‚úÖ

| –°—Ü–µ–Ω–∞—Ä–∏–π | `is_first_fill_qr` | `queue_time` –¥–ª—è —É—Å–ª—É–≥ |
|----------|-------------------|----------------------|
| QR ‚Üí –ø—É—Å—Ç–∞—è entry ‚Üí —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç —É—Å–ª—É–≥–∏ | `True` | **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ** (–≤—Ä–µ–º—è QR) |
| QR ‚Üí —É—Å–ª—É–≥–∏ –µ—Å—Ç—å ‚Üí —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ | `False` | **–¢–µ–∫—É—â–µ–µ** (–≤—Ä–µ–º—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) |

#### Fix 6: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–µ–π –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —É—Å–ª—É–≥ —Ç–æ–π –∂–µ –æ—á–µ—Ä–µ–¥–∏ ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ K11 –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π K01, —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å **–Ω–æ–≤–∞—è** entry —Å –Ω–æ–≤—ã–º `queue_time`.
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ `queue_tag` –Ω–æ–≤–æ–π —É—Å–ª—É–≥–∏. –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π entry ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π, –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—É—é.

#### Fix 7: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ source='online' –ø—Ä–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ ‚úÖ
**–§–∞–π–ª:** `frontend/src/tables/EnhancedAppointmentsTable.jsx`
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ `source='online'` –∏–ª–∏ `'confirmation'` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è. Badge "QR" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

#### Fix 8: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–æ–≤ —É—Å–ª—É–≥ –∏–∑ –æ–±—ä–µ–∫—Ç–æ–≤ ‚úÖ
**–†–µ—à–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ `[object Object]` –ø—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ –≤ —Å—Ç—Ä–æ–∫—É –∫–æ–¥–∞.

#### Fix 9: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö –∫–æ–¥–æ–≤ ‚úÖ
**–†–µ—à–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–æ–≤ —Ç–æ–ª—å–∫–æ –∏–∑ –ª–∞—Ç–∏–Ω—Å–∫–∏—Ö –±—É–∫–≤.

#### Fix 10: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ –æ—Ç–¥–µ–ª–µ–Ω–∏–π ‚úÖ
**–†–µ—à–µ–Ω–∏–µ:** –§—É–Ω–∫—Ü–∏—è `aggregatePatientsForAllDepartments` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ –æ—Ç–¥–µ–ª–µ–Ω–∏–π.

#### Fix 11: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (Oldest First) ‚úÖ
**Backend:** `registrar_integration.py` ‚Üí `.order_by(OnlineQueueEntry.queue_time.asc())`
**Frontend:** ~~`mergeAppointments`~~ —É–¥–∞–ª–µ–Ω–∞ (SSOT Dec 2025). –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ `filteredAppointments` useMemo.

---

### 9.3 –ú–∞–ø–ø–∏–Ω–≥ —É—Å–ª—É–≥ ‚Üí –æ—á–µ—Ä–µ–¥–µ–π

| –ö–æ–¥ —É—Å–ª—É–≥–∏ | Queue Tag | –í–∫–ª–∞–¥–∫–∞ |
|------------|-----------|---------|
| K01, K11 | cardiology | –ö–∞—Ä–¥–∏–æ–ª–æ–≥ |
| K10 | echokg | –≠–ö–ì |
| D01, D02 | dermatology | –î–µ—Ä–º–∞—Ç–æ–ª–æ–≥ |
| S01, S10 | stomatology | –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥ |
| L01, L10, L11 | laboratory | –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è |
| P01, C01 | procedures | –ü—Ä–æ—Ü–µ–¥—É—Ä—ã |

---

## üìÖ Changelog

| –î–∞—Ç–∞ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| 2025-12-24 | **SSOT Cleanup:** `mergeAppointments` —É–¥–∞–ª–µ–Ω–∞, `isInDepartment` —É–ø—Ä–æ—â–µ–Ω–∞ (465‚Üí11 —Å—Ç—Ä–æ–∫) |
| 2025-12-22 | **Fix 11: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (Oldest First) –¥–ª—è Scenarios 2B & 3** |
| 2025-12-20 | **Fix 10: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ –æ—Ç–¥–µ–ª–µ–Ω–∏–π** |
| 2025-12-20 | **Fix 7 —É–ª—É—á—à–µ–Ω: source='confirmation' —Ç–æ–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç QR badge** |
| 2025-12-19 | **Fix 6-9: –î—É–±–ª–∏ –æ—á–µ—Ä–µ–¥–µ–π, source preservation, service codes** |
| 2025-12-19 | Fix 6: –£—Å–ª—É–≥–∏ —Ç–æ–π –∂–µ –æ—á–µ—Ä–µ–¥–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π entry |
| 2025-12-19 | Fix 7: source='online' —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ |
| 2025-12-19 | Fix 8: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–æ–≤ –∏–∑ –æ–±—ä–µ–∫—Ç–æ–≤ —É—Å–ª—É–≥ |
| 2025-12-19 | Fix 9: –ù–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö –∫–æ–¥–æ–≤ (–û01) |
| 2025-12-19 | **–î–æ–±–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∏–∫—Å—ã QR-–æ—á–µ—Ä–µ–¥–µ–π (—Å–µ–∫—Ü–∏—è 9)** |
| 2025-12-19 | Fix 1-5: patient_id, visit_id, aggregated_ids, queue_time |
| 2024-12-18 | –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è 8: –ü—Ä–∞–≤–∏–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–¥–æ–≤ —É—Å–ª—É–≥ |
| 2024-12-18 | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: K11 —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ K01 |
| 2024-12-18 | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: filterServicesByDepartment –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API-–¥–∞–Ω–Ω—ã–µ |
| 2024-12-17 | –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è SSOT (serviceCodeResolver.js) |
| 2024-12-17 | –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è Batch API |
| 2024-12-17 | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ entry.id –≤–º–µ—Å—Ç–æ specialty |

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-12-24*
