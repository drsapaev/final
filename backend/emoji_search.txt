Lines with emoji:
Line 19: # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º–æ–π SQL –≤–º–µ—Å—Ç–æ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥–µ–ª–∏ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ DailyQueue
Line 73:                 "department_key": getattr(service, 'department_key', None),  # ‚úÖ –î–û–ë–ê–í–õ–Ø–ï–ú department_key
Line 74:                 # ‚úÖ –ù–û–í–´–ï –ü–û–õ–Ø –î–õ–Ø –ö–õ–ê–°–°–ò–§–ò–ö–ê–¶–ò–ò
Line 77:                 "queue_tag": getattr(service, 'queue_tag', None),  # üéØ –î–û–ë–ê–í–õ–Ø–ï–ú queue_tag –î–õ–Ø –≠–ö–ì!
Line 82:             # ‚úÖ –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê: –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≥—Ä—É–ø–ø—É –ø–æ category_code
Line 505:             # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º discount_mode –∏ —Å–æ–∑–¥–∞–µ–º –ø–ª–∞—Ç–µ–∂ —á–µ—Ä–µ–∑ SSOT
Line 513:                     # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ï—Å–ª–∏ –≤–∏–∑–∏—Ç –±—ã–ª –Ω–∞—á–∞—Ç (–≤ –∫–∞–±–∏–Ω–µ—Ç–µ) –∏–ª–∏ –∑–∞–≤–µ—Ä—à—ë–Ω, –≤–µ—Ä–æ—è—Ç–Ω–æ –±—ã–ª –æ–ø–ª–∞—á–µ–Ω
Line 559:             # ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º visit_type: –µ—Å–ª–∏ appointment –±—ã–ª –æ–ø–ª–∞—á–µ–Ω, —Å–æ—Ö—Ä–∞–Ω—è–µ–º visit_type='paid'
Line 606:     # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–æ–ª—å Cashier –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ—á–µ—Ä–µ–¥–∏
Line 627:         # ‚úÖ –£–ü–†–û–©–ï–ù–û: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç—ã –ø–µ—Ä–µ–¥ –ø–∞—Ä—Å–∏–Ω–≥–æ–º (Single Source of Truth)
Line 655:         # ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –ü–æ–ª—É—á–∞–µ–º –∑–∞–ø–∏—Å–∏ –∏–∑ –æ–Ω–ª–∞–π–Ω-–æ—á–µ—Ä–µ–¥–∏ (OnlineQueueEntry)
Line 677:             # ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ–º specialty –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ª—É–≥ –≤–∏–∑–∏—Ç–∞, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ department
Line 685:             # ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≠–ö–ì –≤ —É—Å–ª—É–≥–∞—Ö (–ø–æ queue_tag, –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –∫–æ–¥—É)
Line 694:                 # ‚úÖ SSOT: –ò—Å–ø–æ–ª—å–∑—É–µ–º service_mapping.get_service_code() –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä—É—é—â–µ–π –ª–æ–≥–∏–∫–∏
Line 732:             # ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ–º specialty: –µ—Å–ª–∏ –µ—Å—Ç—å –≠–ö–ì, —Ä–∞–∑–¥–µ–ª—è–µ–º –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏
Line 803:                     "filter_services": True,  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –í–∫–ª—é—á–∞–µ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —É—Å–ª—É–≥
Line 804:                     "ecg_only": True  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –≠–ö–ì —É—Å–ª—É–≥–∏
Line 808:                 # ‚úÖ –û–ë–ù–û–í–õ–ï–ù–û: –û–ø—Ä–µ–¥–µ–ª—è–µ–º specialty –ø–æ department_key –∏–∑ —É—Å–ª—É–≥ –≤–∏–∑–∏—Ç–∞
Line 837:             # ‚úÖ –£–ü–†–û–©–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º getattr –≤–º–µ—Å—Ç–æ try/except (Single Source of Truth)
Line 846:             # ‚úÖ –£–ü–†–û–©–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º getattr –≤–º–µ—Å—Ç–æ try/except (Single Source of Truth)
Line 852:         # ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–ø–∏—Å–∏ –∏–∑ –æ–Ω–ª–∞–π–Ω-–æ—á–µ—Ä–µ–¥–∏ (OnlineQueueEntry)
Line 865:             # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç - queue_tag –∏–∑ DailyQueue, –∑–∞—Ç–µ–º doctor.specialty
Line 887:                 "ecg": "echokg",  # ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –º–∞–ø–ø–∏–Ω–≥ –¥–ª—è –≠–ö–ì
Line 918:             # ‚úÖ –û–ë–ù–û–í–õ–ï–ù–û: –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –∏–∑ appointment
Line 936:                         # ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –ü–æ–∏—Å–∫ —É—Å–ª—É–≥–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é (Appointment.services - —ç—Ç–æ JSON —Å—Ç—Ä–æ–∫)
Line 953:             # ‚úÖ –£–ü–†–û–©–ï–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ Visit –¥–ª—è —ç—Ç–æ–≥–æ Appointment (—á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
Line 1002:             # ‚úÖ –£–ü–†–û–©–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º getattr –≤–º–µ—Å—Ç–æ try/except (Single Source of Truth)
Line 1077:                         # ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–ú short_name() - —Ç–µ–ø–µ—Ä—å –æ–Ω –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
Line 1085:                         # ‚úÖ –õ–û–ì–ò–†–û–í–ê–ù–ò–ï: –ü–∞—Ü–∏–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
Line 1086:                         print(f"[get_today_queues] ‚ö†Ô∏è –ü–∞—Ü–∏–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è Visit ID={visit.id}, patient_id={visit.patient_id}")
Line 1095:                     # ‚úÖ –§–∏–ª—å—Ç—Ä—É–µ–º —É—Å–ª—É–≥–∏ –µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–ª–∞–≥ ecg_only –∏–ª–∏ filter_services
Line 1128:                         # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º service_code –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —É—Å–ª—É–≥ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (K01, D02, C03 –∏ —Ç.–¥.)
Line 1129:                         # ‚úÖ SSOT: –ò—Å–ø–æ–ª—å–∑—É–µ–º service_mapping.get_service_code() –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä—É—é—â–µ–π –ª–æ–≥–∏–∫–∏
Line 1165:                     # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –µ–¥–∏–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã (Single Source of Truth)
Line 1189:                         # ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–ú short_name() - —Ç–µ–ø–µ—Ä—å –æ–Ω –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
Line 1197:                         # ‚úÖ –õ–û–ì–ò–†–û–í–ê–ù–ò–ï: –ü–∞—Ü–∏–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
Line 1198:                         print(f"[get_today_queues] ‚ö†Ô∏è –ü–∞—Ü–∏–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è Appointment ID={appointment.id}, patient_id={appointment.patient_id}")
Line 1204:                             # ‚úÖ –û—Å—Ç–∞–≤–ª—è–µ–º services –∫–∞–∫ –µ—Å—Ç—å (—É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ–¥—ã), –Ω–æ –¥—É–±–ª–∏—Ä—É–µ–º –≤ service_codes
Line 1233:                     # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –µ–¥–∏–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã (Single Source of Truth)
Line 1253:                     # ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø–∏—Å–µ–π –∏–∑ –æ–Ω–ª–∞–π–Ω-–æ—á–µ—Ä–µ–¥–∏
Line 1307:                 # ‚úÖ –£–ü–†–û–©–ï–ù–û: –î–æ–±–∞–≤–ª—è–µ–º appointment_id –¥–ª—è Visit (–µ—Å–ª–∏ –±—ã–ª —Å–æ–∑–¥–∞–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π Appointment)
Line 1326:                 # ‚úÖ –£–ü–†–û–©–ï–ù–û: –ü–æ–ª—É—á–∞–µ–º –†–ï–ê–õ–¨–ù–´–ô –Ω–æ–º–µ—Ä –∏–∑ queue_entries
Line 1362:                 # ‚úÖ –î–û–ë–ê–í–õ–Ø–ï–ú department_key –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
Line 1387:                                 # ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –ü–æ–∏—Å–∫ —É—Å–ª—É–≥–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é (Appointment.services - —ç—Ç–æ JSON —Å—Ç—Ä–æ–∫)
Line 1397:                     "number": queue_entry_number,  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: —Ä–µ–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∏–∑ queue_entries
Line 1409:                     "created_at": entry_wrapper["created_at"].isoformat() + "Z" if entry_wrapper["created_at"] else None,  # ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º 'Z' –¥–ª—è UTC
Line 1414:                     "department_key": entry_department_key  # ‚úÖ –î–û–ë–ê–í–õ–Ø–ï–ú department_key –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π
Line 1622:             # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º SSOT queue_service –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏
Line 1647:                     f"[create_queue_entries_batch] ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∑–∞–ø–∏—Å—å: specialist_id={specialist_id}, "
