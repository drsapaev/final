# üè• CI/CD Pipeline - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–Ω–∏–∫–æ–π

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç CI/CD –ø–∞–π–ø–ª–∞–π–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–Ω–∏–∫–æ–π.

## üîÑ –≠—Ç–∞–ø—ã –ø–∞–π–ø–ª–∞–π–Ω–∞

### 1. üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (lint)
- **Black** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- **Ruff** - –±—ã—Å—Ç—Ä—ã–π –ª–∏–Ω—Ç–µ—Ä
- **Flake8** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
- **Isort** - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤

### 2. üß™ Unit —Ç–µ—Å—Ç—ã (tests)
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin
- –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö unit —Ç–µ—Å—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –≤ Codecov

### 3. üîí –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (security)
- **Bandit** - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
- **Safety** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
- **Pip-audit** - –∞—É–¥–∏—Ç Python –ø–∞–∫–µ—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 4. üê≥ Docker —Å–±–æ—Ä–∫–∞ (docker)
- –°–±–æ—Ä–∫–∞ Backend Docker –æ–±—Ä–∞–∑–∞
- –°–±–æ—Ä–∫–∞ Frontend Docker –æ–±—Ä–∞–∑–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

### 5. üé≠ E2E —Ç–µ—Å—Ç—ã (e2e)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Playwright
- –ó–∞–ø—É—Å–∫ Backend —Å–µ—Ä–≤–µ—Ä–∞
- –ó–∞–ø—É—Å–∫ Frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ E2E —Ç–µ—Å—Ç–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö

### 6. üìö –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (docs)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI —Å—Ö–µ–º—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Swagger UI
- –í–∞–ª–∏–¥–∞—Ü–∏—è README —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### 7. üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (integration)
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã
- –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints
- –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### 8. üöÄ –î–µ–ø–ª–æ–π –≤ staging (deploy-staging)
- –î–µ–ø–ª–æ–π –≤ staging —Å—Ä–µ–¥—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ production

### 9. üéØ –î–µ–ø–ª–æ–π –≤ production (deploy-production)
- –î–µ–ø–ª–æ–π –≤ production —Å—Ä–µ–¥—É
- –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend
- **Python 3.11**
- **FastAPI** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy** - ORM
- **Alembic** - –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- **Pytest** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä

### Frontend
- **Node.js 20**
- **React 18**
- **Vite** - —Å–±–æ—Ä—â–∏–∫
- **Playwright** - E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Vitest** - unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### DevOps
- **GitHub Actions** - CI/CD
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Codecov** - –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- **Bandit/Safety** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
.github/workflows/
‚îú‚îÄ‚îÄ ci-cd-new.yml          # –ù–æ–≤—ã–π CI/CD –ø–∞–π–ø–ª–∞–π–Ω
‚îú‚îÄ‚îÄ ci-cd.yml             # –°—Ç–∞—Ä—ã–π CI/CD –ø–∞–π–ø–ª–∞–π–Ω
‚îú‚îÄ‚îÄ load-testing.yml      # –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ monitoring.yml        # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
‚îî‚îÄ‚îÄ security-scan.yml     # –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

backend/
‚îú‚îÄ‚îÄ generate_openapi.py   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI —Å—Ö–µ–º—ã
‚îî‚îÄ‚îÄ test_*.py            # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

frontend/
‚îú‚îÄ‚îÄ playwright.config.js  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Playwright
‚îú‚îÄ‚îÄ e2e/                 # E2E —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ basic.spec.js    # –ë–∞–∑–æ–≤—ã–µ E2E —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ package.json         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å Playwright
```

## üöÄ –ó–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–æ
```bash
# Backend —Ç–µ—Å—Ç—ã
cd backend
pip install -r requirements.txt
pytest test_*.py -v

# Frontend E2E —Ç–µ—Å—Ç—ã
cd frontend
npm install
npx playwright test

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI
cd backend
python generate_openapi.py > openapi.json
```

### –í GitHub Actions
–ü–∞–π–ø–ª–∞–π–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏:
- Push –≤ –≤–µ—Ç–∫—É `main`
- Pull Request –≤ –≤–µ—Ç–∫—É `main`
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –ø–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º –≤ 3:00 UTC

## üìä –û—Ç—á–µ—Ç—ã

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- –û—Ç—á–µ—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Codecov
- HTML –æ—Ç—á–µ—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –û—Ç—á–µ—Ç—ã Bandit, Safety, Pip-audit
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã GitHub Actions

### E2E —Ç–µ—Å—Ç—ã
- HTML –æ—Ç—á–µ—Ç—ã Playwright
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ –≤–∏–¥–µ–æ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```yaml
PYTHON_VERSION: '3.11'
DATABASE_URL: 'sqlite:///./test_clinic.db'
CORS_DISABLE: '1'
WS_DEV_ALLOW: '1'
```

### Environments
- `staging` - —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞
- `production` - –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ä–µ–¥–∞

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
- –í—Å–µ –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ GitHub Actions
- –î–µ—Ç–∞–ª—å–Ω—ã–µ traceback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
- –û—Ç—á–µ—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –û—Ç—á–µ—Ç—ã –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞
- E2E –æ—Ç—á–µ—Ç—ã
- OpenAPI —Å—Ö–µ–º—ã

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –¥–µ–ø–ª–æ–µ–≤

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Email –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- Slack –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- GitHub —Å—Ç–∞—Ç—É—Å—ã

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Dependabot
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü–∞–π–ø–ª–∞–π–Ω
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç–µ–≥–∏
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

**–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–Ω–∏–∫–æ–π** - –Ω–∞–¥–µ–∂–Ω–∞—è, –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —É—á—Ä–µ–∂–¥–µ–Ω–∏–π. üè•‚ú®
