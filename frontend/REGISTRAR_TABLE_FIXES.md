# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –≤ –ø–∞–Ω–µ–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –¥–≤–æ–π–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**

**–ë—ã–ª–æ:**
```javascript
const [appointments, setAppointments] = useState([
  // 6 —Ö–∞—Ä–¥–∫–æ–¥ –∑–∞–ø–∏—Å–µ–π –ø—Ä—è–º–æ –≤ useState
]);

const loadAppointments = async () => {
  // API –≤—ã–∑–æ–≤ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
  setAppointments(data); // –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
};
```

**–°—Ç–∞–ª–æ:**
```javascript
// –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É
const DEMO_APPOINTMENTS = [...];

// –ß–∏—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const [appointments, setAppointments] = useState([]);
const [dataSource, setDataSource] = useState('loading');

// –£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
const loadAppointments = async () => {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ ‚Üí API –∑–∞–ø—Ä–æ—Å ‚Üí Fallback –Ω–∞ –¥–µ–º–æ
};
```

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–∫–µ–Ω–∞ –ø–µ—Ä–µ–¥ API –∑–∞–ø—Ä–æ—Å–æ–º
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ 401 –æ—à–∏–±–æ–∫ —Å –æ—á–∏—Å—Ç–∫–æ–π —Ç–æ–∫–µ–Ω–∞
- ‚úÖ Fallback –Ω–∞ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ª—é–±—ã—Ö –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```javascript
if (!token) {
  setDataSource('demo');
  setAppointments(DEMO_APPOINTMENTS);
  return;
}

if (response.status === 401) {
  localStorage.removeItem('auth_token');
  setDataSource('demo');
  setAppointments(DEMO_APPOINTMENTS);
}
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö**

**–í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**
- üü° **–î–µ–º–æ-—Ä–µ–∂–∏–º:** –ñ–µ–ª—Ç—ã–π –±–∞–Ω–Ω–µ—Ä —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å"
- üü¢ **API –¥–∞–Ω–Ω—ã–µ:** –ó–µ–ª–µ–Ω—ã–π –±–∞–Ω–Ω–µ—Ä —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–ø–∏—Å–µ–π
- üîµ **–ó–∞–≥—Ä—É–∑–∫–∞:** –°–∏–Ω–∏–π –±–∞–Ω–Ω–µ—Ä —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π

```javascript
{dataSource === 'demo' && (
  <div style={{ background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)' }}>
    ‚ö†Ô∏è –ü–æ–∫–∞–∑–∞–Ω—ã –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É.
    <button onClick={loadAppointments}>üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
  </div>
)}
```

### 4. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ API –æ—Ç–≤–µ—Ç–æ–≤**

```javascript
const appointmentsData = Array.isArray(data) 
  ? data 
  : (data.items || data.appointments || []);

if (appointmentsData.length > 0) {
  setAppointments(appointmentsData);
  setDataSource('api');
} else {
  // –î–∞–∂–µ –µ—Å–ª–∏ API —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ–º–æ
  setAppointments(DEMO_APPOINTMENTS);
  setDataSource('demo');
}
```

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:
1. **Race Condition** - –±–æ–ª—å—à–µ –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–µ–∂–¥—É –¥–µ–º–æ –∏ API –¥–∞–Ω–Ω—ã–º–∏
2. **–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å** - —á–µ—Ç–∫–∞—è –ª–æ–≥–∏–∫–∞: API ‚Üí –î–µ–º–æ ‚Üí –û—à–∏–±–∫–∞
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–æ–∫–µ–Ω–∞–º–∏** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ 401 –æ—à–∏–±–æ–∫

### üìä –ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
1. **–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."
2. **–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å –∏ API —Ä–∞–±–æ—Ç–∞–µ—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. **–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω:** –û—á–∏—â–∞–µ—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
4. **–ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
5. **–ï—Å–ª–∏ API –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ

### üîÑ –õ–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å" –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
- Graceful fallback –Ω–∞ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:**
   - –¢–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π ‚Üí API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ ‚Üí –ó–µ–ª–µ–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä

2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π:**
   - –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ ‚Üí –°—Ä–∞–∑—É –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ ‚Üí –ñ–µ–ª—Ç—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
   - –¢–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω ‚Üí 401 ‚Üí –û—á–∏—Å—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞ ‚Üí –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ

3. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º:**
   - –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ ‚Üí –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
   - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ ‚Üí –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ

4. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:**
   - –ù–∞–∂–∞—Ç—å "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å" ‚Üí –ù–æ–≤—ã–π API –∑–∞–ø—Ä–æ—Å

## üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```javascript
console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑ API:', appointmentsData.length, '–∑–∞–ø–∏—Å–µ–π');
console.log('‚ÑπÔ∏è API –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ');
console.warn('–¢–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω (401), –æ—á–∏—â–∞–µ–º –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ');
```

### Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
```javascript
if (window.toast) {
  window.toast.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞. –ü–æ–∫–∞–∑–∞–Ω—ã –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ.');
}
```

## üöÄ –°–¢–ê–¢–£–°

- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã** –≤ `RegistrarPanel.jsx`
- ‚úÖ **–õ–∏–Ω—Ç–µ—Ä—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ **UX —É–ª—É—á—à–µ–Ω** —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ä–µ–∞–ª—å–Ω—ã–º API
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫ –¥—Ä—É–≥–∏–º —Ç–∞–±–ª–∏—Ü–∞–º

## üîç –ú–û–ù–ò–¢–û–†–ò–ù–ì

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:
- `‚úÖ` - —É—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ API –¥–∞–Ω–Ω—ã—Ö
- `‚ÑπÔ∏è` - API –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ
- `‚ö†Ô∏è` - –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–æ–∫–µ–Ω–æ–º
- `‚ùå` - –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏/—Å–µ—Ä–≤–µ—Ä–∞
